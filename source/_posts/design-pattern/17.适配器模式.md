---
title: 设计模式17-适配器模式
categories:
	- Design Pattern
---

# 适配器模式

## 定义

适配器模式（Adapter），将一个类的接口转换成客户希望的另外一个接口。Adapter模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。

> 类似于国标转英标的转接头。

## 适用场景和时机

### 场景

系统的数据和行为都相同或类似，但接口不统一时，我们应该考虑用适配器，目的是使控制范围之外的一个原有对象与某个接口匹配。客户代码可以统一调用同一接口就行了，更简单、更直接、更紧凑。

适配器模式主要应用于希望复用一些现存的类，但是接口又与复用环境要求不一致的情况，比如在需要对早期代码复用一些功能等应用上很有实际价值。

### 时机

在设计阶段，应该把类似的功能类的接口按照规范设计得相同。

>设计之初就需要考虑用适配器模式的场景：公司设计一系统时考虑使用第三方开发组件，而这个组件的接口与我们自己的系统接口是不相同的，而我们也没有必要为了迎合它而改动自己的接口

在软件开发后期或维护期，通常应优先考虑通过重构统一接口，其次在双方都不太容易修改的时候再使用适配器模式适配。

> 用适配器模式是无奈之举，有点'亡羊补牢'的感觉

## 类型

GoF的设计模式介绍了适配器模式的两种类型：

### 类适配器模式

类适配器模式通过多重继承对一个接口与另一个接口进行匹配，而Java不支持多重继承，故略。

### 对象适配器模式

## 结构图

对象适配器模式结构图：

![适配器模式结构图.jpg](https://s2.loli.net/2023/10/15/Zv51cel4BIWzA2q.jpg)

## 基本代码

`Target` 接口：客户所期待的接口

```java
class Target {
  public void request() {
    System.out.println("普通请求");
  }
}
```

`Adaptee` 类：需要适配的类

```java
class Adaptee {
  public void specificRequest() {
    System.out.println("特殊请求");
  }
}
```

`Adapter` 接口：通过在内部包装一个 `Adaptee` 对象，把源接口转换成目标接口

```java
class Adapter extends Target {
  
  private Adaptee adaptee = new Adaptee(); // 建立一个私有的Adaptee对象
  
  public void request() {
    adaptee.specificRequest(); // 把表面上调用request()方法转换成实际调用specificRequest()方法
  }
}
```

客户端代码：

```java
Target target = new Adapter();

target.request();
```

