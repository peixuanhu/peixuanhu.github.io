---
title: 算法模板1-7.区间合并模板
categories:
  - [Algorithm, Template]
---

# 区间合并

**快速地**将有交集的区间合并。

跟区间有关的问题，大概率会用到贪心。按照端点排序。

## 应用场景

有若干个区间，若其中某些区间有交集，则将它们合并。

## 步骤

类似贪心。

1. 按区间左端点从小到大排序
2. 当前维护的区间，左端点 `st`，右端点 `ed`。第`i`个区间（左端点 `l`，右端点 `r`）与当前维护区间的关系：
   1. `st` <= `l` <= `r` <= `ed` => 当前维护区间不变
   2. `st` <= `l` <= `ed` < `r` => `ed` 延长到 `r`
   3. `st` <= `ed` < `l` <= `r`  => 当前维护区间放入答案，不会再更改；第 `i` 个区间作为新的当前维护区间

## 代码模板

```cpp
// 返回合并后的区间数组
vector<PII> merge(vector<PII> &segs) {
    vector<PII> res;
    
    sort(segs.begin(), segs.end());
    
    int st = -2e9, ed = -2e9; // 初始区间设为负无穷
    for (auto seg : segs) {
        if (ed < seg.first) { // 新区间左端点大于当前维护区间右端点，开始维护新区间
            if (st != -2e9) res.push_back({st, ed});
            st = seg.first, ed = seg.second;
        } else {
            ed = max(ed, seg.second); // 合并情况1, 2
        }
    }
    
    if (st != -2e9) res.push_back({st, ed}); // 最后的区间也要加入答案，并且它不能为初始区间（segs为空的情况下答案也应为空）
    
    return res;
}
```

