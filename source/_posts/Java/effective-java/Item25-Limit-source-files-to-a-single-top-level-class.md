---
title: Effective Java-25. Limit source files to a single top-level class
categories:
  - [Java, Effective Java]
---

# Item25: Limit source files to a single top-level class

While the Java compiler lets you define **multiple top-level classes in a single source file,** there are no benefits associated with doing so, and there are significant risks. The risks stem from the fact that defining multiple top-level classes in a source file makes it possible to provide **multiple definitions for a class**.

> Which definition gets used is affected by the order in which the source files are passed to the compiler.

## Example

Main.java:

```java
public class Main {
  public static void main(String[] args) {
  	System.out.println(Utensil.NAME + Dessert.NAME);
  }
}
```

Utensil.java

```java
// Two classes defined in one file. Don't ever do this!
class Utensil {
   static final String NAME = "pan";
}
class Dessert {
   static final String NAME = "cake";
}
```

Dessert.java

```java
// Two classes defined in one file. Don't ever do this!
class Utensil {
   static final String NAME = "pot";
}
class Dessert {
   static final String NAME = "pie";
}
```

Compile the program with the command `javac Main.java Dessert.java`, the compilation will fail, and the compiler will tell you that you’ve multiply defined the classes `Utensil` and `Dessert`.

## Solution

1. Splitting the top-level classes (Utensil and Dessert, in the case of our example) into **separate source files**.

2. If you are tempted to put multiple top-level classes into a single source file, consider using **static member classes** (Item 24) as an alternative.

   ```java
   // Static member classes instead of multiple top-level classes
   public class Test {
      public static void main(String[] args) {
          System.out.println(Utensil.NAME + Dessert.NAME);
      }
      private static class Utensil {
          static final String NAME = "pan";
      }
      private static class Dessert {
          static final String NAME = "cake";
      }
   }
   ```

   If the classes are subservient to another class, making them into static member classes is generally the better alternative, because it enhances readability and makes it possible to reduce the accessibility of the classes by declaring them private (Item 15).

## Summary

**Never put multiple top-level classes or interfaces in a single source file.** 

Following this rule guarantees that you can’t have **multiple definitions** for a single class at compile time. 

This in turn guarantees that the class files generated by compilation, and the behavior of the resulting program, are **independent of the order** in which the source files are passed to the compiler.